# AI è¾…åŠ©é…ç½®ç”ŸæˆåŠŸèƒ½ - éœ€æ±‚æ–‡æ¡£ä¸è®¾è®¡æ–¹æ¡ˆ

**ç‰ˆæœ¬**: 1.0
**æ—¥æœŸ**: 2025-11-19
**çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

---

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 èƒŒæ™¯ä¸åŠ¨æœº

å½“å‰ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨é…ç½®æ‘˜è¦ç­›é€‰æ¨¡å¼å’Œæ–‡çŒ®çŸ©é˜µç»´åº¦ï¼Œè¿™éœ€è¦ï¼š
- ç†è§£ JSON/YAML é…ç½®æ–‡ä»¶æ ¼å¼
- ç†Ÿæ‚‰é—®é¢˜ç±»å‹çš„æŠ€æœ¯å®šä¹‰ï¼ˆå¦‚ yes_noã€single_choiceã€multiple_choice ç­‰ï¼‰
- æ‰‹åŠ¨è®¾è®¡åˆç†çš„ç­›é€‰é—®é¢˜

è¿™å¯¹éæŠ€æœ¯ç”¨æˆ·æ¥è¯´å­˜åœ¨è¾ƒé«˜çš„ä½¿ç”¨é—¨æ§›ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼

é€šè¿‡å¼•å…¥ AI è¾…åŠ©é…ç½®ç”ŸæˆåŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š
1. **ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚**ï¼Œæ— éœ€ç†è§£æŠ€æœ¯ç»†èŠ‚
2. **å¿«é€Ÿç”Ÿæˆä¸“ä¸šçš„é…ç½®**ï¼Œç”± AI è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é—®é¢˜ç±»å‹
3. **è·å¾—æ™ºèƒ½å»ºè®®**ï¼ŒAI æ ¹æ®ç ”ç©¶é¢†åŸŸå’Œç›®æ ‡è‡ªåŠ¨è®¾è®¡åˆç†çš„é—®é¢˜
4. **è¿­ä»£ä¼˜åŒ–é…ç½®**ï¼Œå¯ä»¥åœ¨ AI ç”Ÿæˆçš„åŸºç¡€ä¸Šç»§ç»­è°ƒæ•´

### 1.3 åº”ç”¨åœºæ™¯

#### åœºæ™¯ 1ï¼šæ‘˜è¦ç­›é€‰æ¨¡å¼åˆ›å»º
**ç”¨æˆ·æè¿°**ï¼š
> "æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªç­›é€‰å¿ƒç†å­¦å®è¯ç ”ç©¶çš„æ¨¡å¼ã€‚æˆ‘éœ€è¦çŸ¥é“ç ”ç©¶æ˜¯å¦ä½¿ç”¨äº†å®éªŒæ–¹æ³•ï¼Œæ ·æœ¬é‡æ˜¯å¤šå°‘ï¼Œæ˜¯å¦æœ‰å¯¹ç…§ç»„ï¼Œä»¥åŠç ”ç©¶çš„ä¸»è¦å‘ç°æ˜¯ä»€ä¹ˆã€‚"

**AI ç”Ÿæˆç»“æœ**ï¼š
- æ¨¡å¼åç§°ï¼špsychology_empirical_screening
- Yes/No é—®é¢˜ï¼š
  - æ˜¯å¦ä½¿ç”¨å®éªŒæ–¹æ³•ï¼Ÿ
  - æ˜¯å¦æœ‰å¯¹ç…§ç»„ï¼Ÿ
- å¼€æ”¾é—®é¢˜ï¼š
  - æ ·æœ¬é‡æ˜¯å¤šå°‘ï¼Ÿ
  - ä¸»è¦ç ”ç©¶å‘ç°æ˜¯ä»€ä¹ˆï¼Ÿ

#### åœºæ™¯ 2ï¼šæ–‡çŒ®çŸ©é˜µç»´åº¦åˆ›å»º
**ç”¨æˆ·æè¿°**ï¼š
> "æˆ‘åœ¨åšå…³äºæœºå™¨å­¦ä¹ åº”ç”¨çš„æ–‡çŒ®ç»¼è¿°ã€‚éœ€è¦æå–æ¯ç¯‡æ–‡çŒ®ä½¿ç”¨çš„ç®—æ³•ç±»å‹ï¼ˆå¯èƒ½æœ‰å¤šä¸ªï¼‰ã€æ•°æ®é›†å¤§å°ã€å‡†ç¡®ç‡ï¼Œä»¥åŠç ”ç©¶çš„åº”ç”¨é¢†åŸŸã€‚å¦å¤–æˆ‘æƒ³è¯„ä¼°æ¯ç¯‡æ–‡çŒ®çš„æ–¹æ³•åˆ›æ–°æ€§ã€‚"

**AI ç”Ÿæˆç»“æœ**ï¼š
- å¤šé€‰é¢˜ç»´åº¦ï¼šä½¿ç”¨çš„ç®—æ³•ç±»å‹ï¼ˆé€‰é¡¹ï¼šæ·±åº¦å­¦ä¹ ã€ä¼ ç»Ÿæœºå™¨å­¦ä¹ ã€å¼ºåŒ–å­¦ä¹ ç­‰ï¼‰
- æ•°å€¼æå–ç»´åº¦ï¼šæ•°æ®é›†å¤§å°ã€å‡†ç¡®ç‡
- å•é€‰é¢˜ç»´åº¦ï¼šåº”ç”¨é¢†åŸŸ
- è¯„åˆ†ç»´åº¦ï¼šæ–¹æ³•åˆ›æ–°æ€§ï¼ˆ1-5åˆ†ï¼‰

---

## 2. åŠŸèƒ½éœ€æ±‚

### 2.1 åŠŸèƒ½æ¨¡å—

#### æ¨¡å— 1ï¼šæ‘˜è¦ç­›é€‰æ¨¡å¼ AI åŠ©æ‰‹
**ä½ç½®**ï¼šæ‘˜è¦ç­›é€‰æ ‡ç­¾é¡µï¼ˆAbstract Tabï¼‰

**åŠŸèƒ½ç‚¹**ï¼š
1. **"AI è¾…åŠ©åˆ›å»ºæ¨¡å¼"æŒ‰é’®**
   - ä½ç½®ï¼šæ¨¡å¼é€‰æ‹©ä¸‹æ‹‰æ¡†æ—è¾¹
   - è§¦å‘ï¼šæ‰“å¼€ AI åŠ©æ‰‹å¯¹è¯æ¡†

2. **AI åŠ©æ‰‹å¯¹è¯æ¡†**
   - è¾“å…¥æ¡†ï¼šå¤šè¡Œæ–‡æœ¬ï¼Œè®©ç”¨æˆ·æè¿°éœ€æ±‚
   - æç¤ºæ–‡æœ¬ï¼šå¼•å¯¼ç”¨æˆ·å¦‚ä½•æè¿°ï¼ˆè§åæ–‡ï¼‰
   - "ç”Ÿæˆé…ç½®"æŒ‰é’®ï¼šè°ƒç”¨ AI ç”Ÿæˆé…ç½®
   - é¢„è§ˆåŒºåŸŸï¼šæ˜¾ç¤º AI ç”Ÿæˆçš„é—®é¢˜åˆ—è¡¨
   - "åº”ç”¨"æŒ‰é’®ï¼šå°†ç”Ÿæˆçš„é…ç½®æ·»åŠ åˆ° questions_config.json
   - "é‡æ–°ç”Ÿæˆ"æŒ‰é’®ï¼šåŸºäºç›¸åŒæè¿°é‡æ–°ç”Ÿæˆ
   - "å–æ¶ˆ"æŒ‰é’®ï¼šæ”¾å¼ƒç”Ÿæˆ

3. **ç”Ÿæˆåçš„é…ç½®ç®¡ç†**
   - è‡ªåŠ¨æ·»åŠ åˆ°æ¨¡å¼åˆ—è¡¨
   - ç”¨æˆ·å¯ä»¥é€šè¿‡"ç¼–è¾‘é—®é¢˜"åŠŸèƒ½ç»§ç»­æ‰‹åŠ¨è°ƒæ•´
   - ä¿å­˜åˆ° questions_config.json

#### æ¨¡å— 2ï¼šæ–‡çŒ®çŸ©é˜µç»´åº¦ AI åŠ©æ‰‹
**ä½ç½®**ï¼šæ–‡çŒ®çŸ©é˜µæ ‡ç­¾é¡µï¼ˆMatrix Tabï¼‰

**åŠŸèƒ½ç‚¹**ï¼š
1. **"AI è¾…åŠ©åˆ›å»ºç»´åº¦"æŒ‰é’®**
   - ä½ç½®ï¼šç»´åº¦ç¼–è¾‘å™¨å¯¹è¯æ¡†ä¸­
   - è§¦å‘ï¼šæ‰“å¼€ AI åŠ©æ‰‹å¯¹è¯æ¡†

2. **AI åŠ©æ‰‹å¯¹è¯æ¡†**
   - è¾“å…¥æ¡†ï¼šå¤šè¡Œæ–‡æœ¬ï¼Œè®©ç”¨æˆ·æè¿°éœ€æ±‚
   - æç¤ºæ–‡æœ¬ï¼šå¼•å¯¼ç”¨æˆ·å¦‚ä½•æè¿°
   - "ç”Ÿæˆé…ç½®"æŒ‰é’®ï¼šè°ƒç”¨ AI ç”Ÿæˆç»´åº¦é…ç½®
   - é¢„è§ˆåŒºåŸŸï¼šæ˜¾ç¤º AI ç”Ÿæˆçš„ç»´åº¦åˆ—è¡¨ï¼ˆè¡¨æ ¼å½¢å¼ï¼‰
   - æ‰¹é‡æ“ä½œï¼š
     - "å…¨é€‰/å…¨ä¸é€‰"å¤é€‰æ¡†
     - æ¯ä¸ªç»´åº¦æœ‰å¤é€‰æ¡†ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§åº”ç”¨
   - "åº”ç”¨é€‰ä¸­"æŒ‰é’®ï¼šå°†é€‰ä¸­çš„ç»´åº¦æ·»åŠ åˆ°é…ç½®
   - "é‡æ–°ç”Ÿæˆ"æŒ‰é’®ï¼šé‡æ–°ç”Ÿæˆ
   - "å–æ¶ˆ"æŒ‰é’®ï¼šæ”¾å¼ƒç”Ÿæˆ

3. **ç”Ÿæˆåçš„é…ç½®ç®¡ç†**
   - æ·»åŠ åˆ°ç°æœ‰ç»´åº¦åˆ—è¡¨
   - ç”¨æˆ·å¯ä»¥ç»§ç»­æ‰‹åŠ¨ç¼–è¾‘æ¯ä¸ªç»´åº¦
   - ä¿å­˜åˆ°é…ç½®æ–‡ä»¶

### 2.2 ç”¨æˆ·äº¤äº’æµç¨‹

#### æµç¨‹ 1ï¼šæ‘˜è¦ç­›é€‰æ¨¡å¼åˆ›å»º

```
ç”¨æˆ·ç‚¹å‡»"AI è¾…åŠ©åˆ›å»ºæ¨¡å¼"
  â†’ æ‰“å¼€å¯¹è¯æ¡†
  â†’ ç”¨æˆ·è¾“å…¥éœ€æ±‚æè¿°
  â†’ ç‚¹å‡»"ç”Ÿæˆé…ç½®"
  â†’ æ˜¾ç¤ºåŠ è½½çŠ¶æ€
  â†’ AI è¿”å›ç»“æœ
  â†’ æ˜¾ç¤ºé¢„è§ˆï¼ˆæ¨¡å¼åã€é—®é¢˜åˆ—è¡¨ï¼‰
  â†’ ç”¨æˆ·ç¡®è®¤/ä¿®æ”¹
  â†’ ç‚¹å‡»"åº”ç”¨"
  â†’ ä¿å­˜åˆ° questions_config.json
  â†’ å…³é—­å¯¹è¯æ¡†
  â†’ æ¨¡å¼å‡ºç°åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­
```

#### æµç¨‹ 2ï¼šæ–‡çŒ®çŸ©é˜µç»´åº¦åˆ›å»º

```
ç”¨æˆ·æ‰“å¼€"ç¼–è¾‘ç»´åº¦"å¯¹è¯æ¡†
  â†’ ç‚¹å‡»"AI è¾…åŠ©åˆ›å»ºç»´åº¦"
  â†’ æ‰“å¼€ AI åŠ©æ‰‹å¯¹è¯æ¡†
  â†’ ç”¨æˆ·è¾“å…¥éœ€æ±‚æè¿°
  â†’ ç‚¹å‡»"ç”Ÿæˆé…ç½®"
  â†’ æ˜¾ç¤ºåŠ è½½çŠ¶æ€
  â†’ AI è¿”å›ç»“æœ
  â†’ æ˜¾ç¤ºç»´åº¦åˆ—è¡¨é¢„è§ˆï¼ˆè¡¨æ ¼ï¼šç±»å‹ã€é—®é¢˜ã€åˆ—åã€é€‰é¡¹ç­‰ï¼‰
  â†’ ç”¨æˆ·é€‰æ‹©éœ€è¦çš„ç»´åº¦ï¼ˆå¤é€‰æ¡†ï¼‰
  â†’ ç‚¹å‡»"åº”ç”¨é€‰ä¸­"
  â†’ é€‰ä¸­çš„ç»´åº¦æ·»åŠ åˆ°ç»´åº¦åˆ—è¡¨
  â†’ å…³é—­ AI åŠ©æ‰‹å¯¹è¯æ¡†
  â†’ ç”¨æˆ·å¯ç»§ç»­æ‰‹åŠ¨ç¼–è¾‘
```

### 2.3 AI ç”Ÿæˆè§„åˆ™

#### 2.3.1 æ‘˜è¦ç­›é€‰æ¨¡å¼ç”Ÿæˆ

**è¾“å…¥**ï¼šç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æè¿°

**è¾“å‡º**ï¼šJSON æ ¼å¼çš„æ¨¡å¼é…ç½®
```json
{
  "mode_key": "user_generated_mode_1",
  "description": "ç”¨æˆ·æè¿°çš„ç®€åŒ–ç‰ˆ",
  "yes_no_questions": [
    {
      "key": "question_1",
      "question": "é—®é¢˜æ–‡æœ¬ï¼Ÿ",
      "column_name": "åˆ—å"
    }
  ],
  "open_questions": [
    {
      "key": "question_2",
      "question": "é—®é¢˜æ–‡æœ¬ï¼Ÿ",
      "column_name": "åˆ—å"
    }
  ]
}
```

**AI ä»»åŠ¡**ï¼š
1. åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œè¯†åˆ«ï¼š
   - éœ€è¦åˆ¤æ–­çš„æ˜¯éé—®é¢˜ï¼ˆâ†’ yes_no_questionsï¼‰
   - éœ€è¦æå–æè¿°æ€§ä¿¡æ¯çš„é—®é¢˜ï¼ˆâ†’ open_questionsï¼‰
2. ç”Ÿæˆåˆç†çš„é—®é¢˜æ–‡æœ¬ï¼ˆæ¸…æ™°ã€ä¸“ä¸šã€ç¬¦åˆå­¦æœ¯è§„èŒƒï¼‰
3. è‡ªåŠ¨ç”Ÿæˆå­—æ®µæ ‡è¯†ç¬¦ï¼ˆkeyï¼Œä½¿ç”¨è‹±æ–‡è›‡å½¢å‘½åï¼‰
4. è‡ªåŠ¨ç”Ÿæˆåˆ—åï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œæ ¹æ®ç”¨æˆ·è¯­è¨€ï¼‰
5. ç”Ÿæˆæ¨¡å¼æè¿°

#### 2.3.2 æ–‡çŒ®çŸ©é˜µç»´åº¦ç”Ÿæˆ

**è¾“å…¥**ï¼šç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æè¿°

**è¾“å‡º**ï¼šYAML æ ¼å¼çš„ç»´åº¦é…ç½®åˆ—è¡¨
```yaml
dimensions:
  - type: single_choice
    key: research_type
    question: "ç ”ç©¶ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ"
    column_name: "ç ”ç©¶ç±»å‹"
    options:
      - "å®è¯ç ”ç©¶"
      - "ç†è®ºç ”ç©¶"
      - "æ–‡çŒ®ç»¼è¿°"

  - type: number
    key: sample_size
    question: "æ ·æœ¬é‡æ˜¯å¤šå°‘ï¼Ÿ"
    column_name: "æ ·æœ¬é‡"
    unit: "ä¸ª"

  - type: rating
    key: innovation
    question: "è¯„ä¼°ç ”ç©¶çš„åˆ›æ–°æ€§"
    column_name: "åˆ›æ–°æ€§è¯„åˆ†"
    scale: 5
    scale_description: "1=æ— åˆ›æ–°, 5=é«˜åº¦åˆ›æ–°"
```

**AI ä»»åŠ¡**ï¼š
1. åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œè¯†åˆ«ï¼š
   - éœ€è¦æå–çš„ä¿¡æ¯ç±»å‹
   - åˆé€‚çš„é—®é¢˜ç±»å‹ï¼ˆ7ç§ç±»å‹ä¸­é€‰æ‹©ï¼‰
   - é€‰é¡¹å¼é—®é¢˜çš„å…·ä½“é€‰é¡¹
2. ä¸ºæ¯ä¸ªç»´åº¦é€‰æ‹©æœ€åˆé€‚çš„ç±»å‹ï¼š
   - `text`ï¼šå¼€æ”¾å¼æè¿°ï¼ˆå¦‚"ä¸»è¦å‘ç°"ï¼‰
   - `yes_no`ï¼šæ˜¯éåˆ¤æ–­ï¼ˆå¦‚"æ˜¯å¦å®è¯ç ”ç©¶"ï¼‰
   - `single_choice`ï¼šå•é€‰ï¼ˆå¦‚"ç ”ç©¶èŒƒå¼"ï¼‰
   - `multiple_choice`ï¼šå¤šé€‰ï¼ˆå¦‚"ä½¿ç”¨çš„æ–¹æ³•"ï¼‰
   - `number`ï¼šæ•°å€¼æå–ï¼ˆå¦‚"æ ·æœ¬é‡"ï¼‰
   - `rating`ï¼šä¸»è§‚è¯„åˆ†ï¼ˆå¦‚"ç ”ç©¶è´¨é‡"ï¼‰
   - `list`ï¼šåˆ—è¡¨æå–ï¼ˆå¦‚"å…³é”®å˜é‡"ï¼‰
3. ä¸ºé€‰æ‹©é¢˜è‡ªåŠ¨ç”Ÿæˆåˆç†çš„é€‰é¡¹åˆ—è¡¨
4. ç”Ÿæˆä¸“ä¸šçš„é—®é¢˜æ–‡æœ¬
5. è‡ªåŠ¨ç”Ÿæˆå­—æ®µæ ‡è¯†ç¬¦å’Œåˆ—å

### 2.4 æç¤ºè¯å¼•å¯¼æ–‡æœ¬

#### æ‘˜è¦ç­›é€‰æ¨¡å¼

å¯¹è¯æ¡†ä¸­çš„å¼•å¯¼æ–‡æœ¬ï¼š
```
è¯·ç”¨è‡ªç„¶è¯­è¨€æè¿°æ‚¨çš„ç­›é€‰éœ€æ±‚ã€‚æ‚¨å¯ä»¥åŒ…æ‹¬ï¼š

1. ç ”ç©¶é¢†åŸŸæˆ–ä¸»é¢˜ï¼ˆå¦‚ï¼šå¿ƒç†å­¦ã€æœºå™¨å­¦ä¹ ã€å¸‚åœºè¥é”€ï¼‰
2. éœ€è¦åˆ¤æ–­çš„ç‰¹å¾ï¼ˆå¦‚ï¼šæ˜¯å¦ä¸ºå®è¯ç ”ç©¶ã€æ˜¯å¦ä½¿ç”¨å®šé‡æ–¹æ³•ï¼‰
3. éœ€è¦æå–çš„ä¿¡æ¯ï¼ˆå¦‚ï¼šæ ·æœ¬é‡ã€ä¸»è¦å‘ç°ã€ä½¿ç”¨çš„ç†è®ºï¼‰

ç¤ºä¾‹ï¼š
"æˆ‘æƒ³ç­›é€‰å…³äºæ¶ˆè´¹è€…è¡Œä¸ºçš„å®è¯ç ”ç©¶ã€‚éœ€è¦åˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº†é—®å·è°ƒæŸ¥æ³•ï¼Œ
æ˜¯å¦åœ¨ä¸­å›½æƒ…å¢ƒä¸‹å¼€å±•ï¼Œå¹¶æå–ç ”ç©¶çš„ä¸»è¦å‘ç°å’Œç†è®ºæ¡†æ¶ã€‚"
```

#### æ–‡çŒ®çŸ©é˜µç»´åº¦

å¯¹è¯æ¡†ä¸­çš„å¼•å¯¼æ–‡æœ¬ï¼š
```
è¯·ç”¨è‡ªç„¶è¯­è¨€æè¿°æ‚¨éœ€è¦æå–çš„æ–‡çŒ®ä¿¡æ¯ã€‚æ‚¨å¯ä»¥åŒ…æ‹¬ï¼š

1. ç ”ç©¶ç‰¹å¾ï¼ˆå¦‚ï¼šç ”ç©¶ç±»å‹ã€ç ”ç©¶æ–¹æ³•ã€æ ·æœ¬ç‰¹å¾ï¼‰
2. æ•°å€¼ä¿¡æ¯ï¼ˆå¦‚ï¼šæ ·æœ¬é‡ã€æ•ˆåº”é‡ã€å¹´ä»½ï¼‰
3. åˆ†ç±»ä¿¡æ¯ï¼ˆå¦‚ï¼šç ”ç©¶é¢†åŸŸã€ç†è®ºæ¡†æ¶ï¼‰
4. è¯„ä¼°éœ€æ±‚ï¼ˆå¦‚ï¼šç ”ç©¶è´¨é‡ã€ç›¸å…³æ€§ï¼‰

ç¤ºä¾‹ï¼š
"æˆ‘éœ€è¦æå–æ¯ç¯‡æ–‡çŒ®çš„ç ”ç©¶æ–¹æ³•ï¼ˆå®šé‡/å®šæ€§/æ··åˆï¼‰ï¼Œæ ·æœ¬é‡ï¼Œ
æ˜¯å¦åœ¨ä¸­å›½å¼€å±•ï¼Œä½¿ç”¨çš„ä¸»è¦ç†è®ºï¼ˆå¯èƒ½æœ‰å¤šä¸ªï¼‰ï¼Œä»¥åŠæˆ‘å¯¹
ç ”ç©¶è´¨é‡çš„è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ã€‚"
```

---

## 3. æŠ€æœ¯è®¾è®¡

### 3.1 æ¶æ„è®¾è®¡

#### 3.1.1 ç»„ä»¶æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           GUI Layer (Tkinter)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Abstract Tab    â”‚  â”‚  Matrix Tab      â”‚  â”‚
â”‚  â”‚ - AIåŠ©æ‰‹æŒ‰é’®    â”‚  â”‚  - AIåŠ©æ‰‹æŒ‰é’®    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚
            â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AI Configuration Generator Module       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AbstractModeGenerator                â”‚   â”‚
â”‚  â”‚  - generate_mode(description)         â”‚   â”‚
â”‚  â”‚  - parse_ai_response()                â”‚   â”‚
â”‚  â”‚  - validate_config()                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  MatrixDimensionGenerator             â”‚   â”‚
â”‚  â”‚  - generate_dimensions(description)   â”‚   â”‚
â”‚  â”‚  - parse_ai_response()                â”‚   â”‚
â”‚  â”‚  - validate_dimensions()              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AIClient (existing)                â”‚
â”‚  - request(prompt, temperature)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 æ–°å¢æ–‡ä»¶

```
litrx/
â”œâ”€â”€ ai_config_generator.py          # æ–°å¢ï¼šAI é…ç½®ç”Ÿæˆå™¨æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ AbstractModeGenerator       # æ‘˜è¦æ¨¡å¼ç”Ÿæˆå™¨
â”‚   â””â”€â”€ MatrixDimensionGenerator    # çŸ©é˜µç»´åº¦ç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ gui/
â”‚   â””â”€â”€ dialogs/
â”‚       â”œâ”€â”€ ai_mode_assistant.py    # æ–°å¢ï¼šæ‘˜è¦æ¨¡å¼ AI åŠ©æ‰‹å¯¹è¯æ¡†
â”‚       â””â”€â”€ ai_dimension_assistant.py # æ–°å¢ï¼šçŸ©é˜µç»´åº¦ AI åŠ©æ‰‹å¯¹è¯æ¡†
â”‚
â””â”€â”€ prompts/
    â”œâ”€â”€ abstract_mode_generation.yaml  # æ–°å¢ï¼šæ‘˜è¦æ¨¡å¼ç”Ÿæˆæç¤ºè¯æ¨¡æ¿
    â””â”€â”€ matrix_dimension_generation.yaml # æ–°å¢ï¼šçŸ©é˜µç»´åº¦ç”Ÿæˆæç¤ºè¯æ¨¡æ¿
```

### 3.2 æ•°æ®æµè®¾è®¡

#### 3.2.1 æ‘˜è¦æ¨¡å¼ç”Ÿæˆæµç¨‹

```
ç”¨æˆ·æè¿° (str)
    â†“
AbstractModeGenerator.generate_mode()
    â†“
æ„å»ºæç¤ºè¯ï¼ˆä½¿ç”¨æ¨¡æ¿ + ç”¨æˆ·æè¿°ï¼‰
    â†“
AIClient.request(prompt)
    â†“
AI å“åº”ï¼ˆJSON æ ¼å¼å­—ç¬¦ä¸²ï¼‰
    â†“
parse_ai_response() â†’ è§£æä¸º Python dict
    â†“
validate_config() â†’ éªŒè¯é…ç½®æœ‰æ•ˆæ€§
    â†“
è¿”å›éªŒè¯åçš„é…ç½® dict
    â†“
ä¿å­˜åˆ° questions_config.json
```

#### 3.2.2 çŸ©é˜µç»´åº¦ç”Ÿæˆæµç¨‹

```
ç”¨æˆ·æè¿° (str)
    â†“
MatrixDimensionGenerator.generate_dimensions()
    â†“
æ„å»ºæç¤ºè¯ï¼ˆä½¿ç”¨æ¨¡æ¿ + ç”¨æˆ·æè¿°ï¼‰
    â†“
AIClient.request(prompt)
    â†“
AI å“åº”ï¼ˆYAML æ ¼å¼å­—ç¬¦ä¸²ï¼‰
    â†“
parse_ai_response() â†’ è§£æä¸º Python list[dict]
    â†“
validate_dimensions() â†’ éªŒè¯æ¯ä¸ªç»´åº¦
    â†“
è¿”å›éªŒè¯åçš„ç»´åº¦åˆ—è¡¨
    â†“
æ·»åŠ åˆ°ç°æœ‰ç»´åº¦é…ç½®
```

### 3.3 æ ¸å¿ƒç±»è®¾è®¡

#### 3.3.1 AbstractModeGenerator

```python
class AbstractModeGenerator:
    """AI-powered abstract screening mode generator."""

    def __init__(self, config: dict):
        """Initialize with AI client configuration."""
        self.config = config
        self.client = AIClient(config["AI_SERVICE"], config)
        self.prompt_template = self._load_prompt_template()

    def generate_mode(
        self,
        description: str,
        language: str = "zh"
    ) -> dict:
        """Generate screening mode from user description.

        Args:
            description: User's natural language description
            language: Output language (zh/en)

        Returns:
            Mode configuration dict with structure:
            {
                "mode_key": str,
                "description": str,
                "yes_no_questions": list[dict],
                "open_questions": list[dict]
            }

        Raises:
            ValueError: If AI response is invalid
            AIClientError: If AI request fails
        """
        # 1. æ„å»ºæç¤ºè¯
        prompt = self._build_prompt(description, language)

        # 2. è°ƒç”¨ AI
        response = self.client.request(
            prompt=prompt,
            temperature=0.3  # è¾ƒä½æ¸©åº¦ä¿è¯ç¨³å®šæ€§
        )

        # 3. è§£æå“åº”
        config = self._parse_response(response)

        # 4. éªŒè¯é…ç½®
        self._validate_config(config)

        return config

    def _build_prompt(self, description: str, language: str) -> str:
        """Build AI prompt from template and user description."""
        pass

    def _parse_response(self, response: str) -> dict:
        """Parse AI response (JSON) into configuration dict."""
        pass

    def _validate_config(self, config: dict) -> None:
        """Validate generated configuration structure."""
        pass

    def _load_prompt_template(self) -> str:
        """Load prompt template from file."""
        pass
```

#### 3.3.2 MatrixDimensionGenerator

```python
class MatrixDimensionGenerator:
    """AI-powered literature matrix dimension generator."""

    # 7ç§æ”¯æŒçš„é—®é¢˜ç±»å‹
    SUPPORTED_TYPES = [
        "text", "yes_no", "single_choice",
        "multiple_choice", "number", "rating", "list"
    ]

    def __init__(self, config: dict):
        """Initialize with AI client configuration."""
        self.config = config
        self.client = AIClient(config["AI_SERVICE"], config)
        self.prompt_template = self._load_prompt_template()

    def generate_dimensions(
        self,
        description: str,
        language: str = "zh"
    ) -> list[dict]:
        """Generate matrix dimensions from user description.

        Args:
            description: User's natural language description
            language: Output language (zh/en)

        Returns:
            List of dimension dicts, each with structure:
            {
                "type": str,  # one of SUPPORTED_TYPES
                "key": str,
                "question": str,
                "column_name": str,
                "options": list[str],  # for choice types
                "unit": str,  # for number type
                "scale": int,  # for rating type
                "scale_description": str,  # for rating type
                "separator": str  # for list type
            }

        Raises:
            ValueError: If AI response is invalid
            AIClientError: If AI request fails
        """
        # 1. æ„å»ºæç¤ºè¯
        prompt = self._build_prompt(description, language)

        # 2. è°ƒç”¨ AI
        response = self.client.request(
            prompt=prompt,
            temperature=0.3
        )

        # 3. è§£æå“åº”
        dimensions = self._parse_response(response)

        # 4. éªŒè¯æ¯ä¸ªç»´åº¦
        for dim in dimensions:
            self._validate_dimension(dim)

        return dimensions

    def _build_prompt(self, description: str, language: str) -> str:
        """Build AI prompt from template and user description."""
        pass

    def _parse_response(self, response: str) -> list[dict]:
        """Parse AI response (YAML) into dimension list."""
        pass

    def _validate_dimension(self, dimension: dict) -> None:
        """Validate a single dimension configuration."""
        # éªŒè¯å¿…éœ€å­—æ®µ
        required_fields = ["type", "key", "question", "column_name"]
        for field in required_fields:
            if field not in dimension:
                raise ValueError(f"Missing required field: {field}")

        # éªŒè¯ç±»å‹
        if dimension["type"] not in self.SUPPORTED_TYPES:
            raise ValueError(f"Invalid type: {dimension['type']}")

        # ç±»å‹ç‰¹å®šéªŒè¯
        if dimension["type"] in ["single_choice", "multiple_choice"]:
            if "options" not in dimension or not dimension["options"]:
                raise ValueError("Choice type requires options")

        if dimension["type"] == "rating":
            if "scale" not in dimension:
                raise ValueError("Rating type requires scale")

    def _load_prompt_template(self) -> str:
        """Load prompt template from file."""
        pass
```

#### 3.3.3 GUI å¯¹è¯æ¡†ç±»

```python
class AIModeAssistantDialog:
    """Dialog for AI-assisted mode creation."""

    def __init__(self, parent: tk.Tk, generator: AbstractModeGenerator):
        """Initialize dialog.

        Args:
            parent: Parent window
            generator: AbstractModeGenerator instance
        """
        self.parent = parent
        self.generator = generator
        self.result = None  # Generated config if successful

        # åˆ›å»ºå¯¹è¯æ¡†çª—å£
        self.dialog = tk.Toplevel(parent)
        self.dialog.title("AI è¾…åŠ©åˆ›å»ºç­›é€‰æ¨¡å¼")
        self.dialog.geometry("700x600")

        self._create_widgets()

    def _create_widgets(self) -> None:
        """Create dialog widgets."""
        # 1. å¼•å¯¼æ–‡æœ¬
        # 2. ç”¨æˆ·è¾“å…¥æ¡†ï¼ˆå¤šè¡Œæ–‡æœ¬ï¼‰
        # 3. ç”ŸæˆæŒ‰é’®
        # 4. é¢„è§ˆåŒºåŸŸï¼ˆæ˜¾ç¤ºç”Ÿæˆçš„é…ç½®ï¼‰
        # 5. åº”ç”¨/å–æ¶ˆæŒ‰é’®
        pass

    def _on_generate(self) -> None:
        """Handle generate button click."""
        # 1. è·å–ç”¨æˆ·æè¿°
        # 2. æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        # 3. è°ƒç”¨ generator.generate_mode()
        # 4. æ˜¾ç¤ºç»“æœé¢„è§ˆ
        # 5. å¯ç”¨åº”ç”¨æŒ‰é’®
        pass

    def _on_apply(self) -> None:
        """Handle apply button click."""
        # 1. å°†ç”Ÿæˆçš„é…ç½®ä¿å­˜åˆ° result
        # 2. å…³é—­å¯¹è¯æ¡†
        pass


class AIDimensionAssistantDialog:
    """Dialog for AI-assisted dimension creation."""

    def __init__(self, parent: tk.Toplevel, generator: MatrixDimensionGenerator):
        """Initialize dialog.

        Args:
            parent: Parent window
            generator: MatrixDimensionGenerator instance
        """
        self.parent = parent
        self.generator = generator
        self.result = None  # List of selected dimensions if successful

        # åˆ›å»ºå¯¹è¯æ¡†çª—å£
        self.dialog = tk.Toplevel(parent)
        self.dialog.title("AI è¾…åŠ©åˆ›å»ºåˆ†æç»´åº¦")
        self.dialog.geometry("900x700")

        self._create_widgets()

    def _create_widgets(self) -> None:
        """Create dialog widgets."""
        # 1. å¼•å¯¼æ–‡æœ¬
        # 2. ç”¨æˆ·è¾“å…¥æ¡†ï¼ˆå¤šè¡Œæ–‡æœ¬ï¼‰
        # 3. ç”ŸæˆæŒ‰é’®
        # 4. é¢„è§ˆåŒºåŸŸï¼ˆè¡¨æ ¼å½¢å¼ï¼Œå¸¦å¤é€‰æ¡†ï¼‰
        # 5. åº”ç”¨é€‰ä¸­/å–æ¶ˆæŒ‰é’®
        pass

    def _on_generate(self) -> None:
        """Handle generate button click."""
        # 1. è·å–ç”¨æˆ·æè¿°
        # 2. æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        # 3. è°ƒç”¨ generator.generate_dimensions()
        # 4. åœ¨è¡¨æ ¼ä¸­æ˜¾ç¤ºç»“æœï¼Œæ¯è¡Œå¸¦å¤é€‰æ¡†
        # 5. å¯ç”¨åº”ç”¨æŒ‰é’®
        pass

    def _on_apply(self) -> None:
        """Handle apply button click."""
        # 1. æ”¶é›†é€‰ä¸­çš„ç»´åº¦
        # 2. ä¿å­˜åˆ° result
        # 3. å…³é—­å¯¹è¯æ¡†
        pass
```

### 3.4 æç¤ºè¯æ¨¡æ¿è®¾è®¡

#### 3.4.1 æ‘˜è¦æ¨¡å¼ç”Ÿæˆæç¤ºè¯

æ–‡ä»¶ï¼š`litrx/prompts/abstract_mode_generation.yaml`

```yaml
system_prompt: |
  You are an expert in academic literature screening and research methodology.
  Your task is to help researchers create abstract screening configurations.

  Given a user's description of their screening needs, generate a structured
  configuration with appropriate yes/no questions and open-ended questions.

user_prompt_template: |
  The user wants to create a literature screening mode with the following requirements:

  """
  {user_description}
  """

  Please generate a screening mode configuration in JSON format with this structure:

  {{
    "mode_key": "descriptive_key_in_snake_case",
    "description": "Brief description in {language}",
    "yes_no_questions": [
      {{
        "key": "question_key_in_english",
        "question": "Question text in {language}?",
        "column_name": "Column name in {language}"
      }}
    ],
    "open_questions": [
      {{
        "key": "question_key_in_english",
        "question": "Question text in {language}?",
        "column_name": "Column name in {language}"
      }}
    ]
  }}

  Guidelines:
  1. Use yes/no questions for binary judgments (e.g., "Is this empirical research?")
  2. Use open questions for extractive or descriptive information (e.g., "What are the main findings?")
  3. Make questions clear, specific, and professionally worded
  4. Generate keys in English snake_case (e.g., "sample_size", "has_control_group")
  5. Generate questions and column names in {language}
  6. Ensure the mode_key is descriptive and unique
  7. Limit to 3-6 yes/no questions and 2-4 open questions for usability

  Output ONLY the JSON, no explanations.

examples:
  - user_description: |
      "æˆ‘æƒ³ç­›é€‰å…³äºæ¶ˆè´¹è€…è¡Œä¸ºçš„å®è¯ç ”ç©¶ã€‚éœ€è¦åˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº†é—®å·è°ƒæŸ¥æ³•ï¼Œ
      æ˜¯å¦åœ¨ä¸­å›½æƒ…å¢ƒä¸‹å¼€å±•ï¼Œå¹¶æå–ç ”ç©¶çš„ä¸»è¦å‘ç°å’Œç†è®ºæ¡†æ¶ã€‚"

    output: |
      {
        "mode_key": "consumer_behavior_empirical",
        "description": "æ¶ˆè´¹è€…è¡Œä¸ºå®è¯ç ”ç©¶ç­›é€‰",
        "yes_no_questions": [
          {
            "key": "is_empirical",
            "question": "è¿™æ˜¯å¦ä¸ºå®è¯ç ”ç©¶ï¼Ÿ",
            "column_name": "å®è¯ç ”ç©¶"
          },
          {
            "key": "uses_survey",
            "question": "æ˜¯å¦ä½¿ç”¨äº†é—®å·è°ƒæŸ¥æ³•ï¼Ÿ",
            "column_name": "é—®å·è°ƒæŸ¥"
          },
          {
            "key": "chinese_context",
            "question": "æ˜¯å¦åœ¨ä¸­å›½æƒ…å¢ƒä¸‹å¼€å±•ï¼Ÿ",
            "column_name": "ä¸­å›½æƒ…å¢ƒ"
          }
        ],
        "open_questions": [
          {
            "key": "main_findings",
            "question": "ç ”ç©¶çš„ä¸»è¦å‘ç°æ˜¯ä»€ä¹ˆï¼Ÿ",
            "column_name": "ä¸»è¦å‘ç°"
          },
          {
            "key": "theoretical_framework",
            "question": "ä½¿ç”¨äº†ä»€ä¹ˆç†è®ºæ¡†æ¶ï¼Ÿ",
            "column_name": "ç†è®ºæ¡†æ¶"
          }
        ]
      }
```

#### 3.4.2 çŸ©é˜µç»´åº¦ç”Ÿæˆæç¤ºè¯

æ–‡ä»¶ï¼š`litrx/prompts/matrix_dimension_generation.yaml`

```yaml
system_prompt: |
  You are an expert in systematic literature review and data extraction.
  Your task is to help researchers design literature matrix dimensions.

  Given a user's description of information they want to extract from papers,
  generate appropriate dimension configurations with correct question types.

user_prompt_template: |
  The user wants to extract the following information from literature:

  """
  {user_description}
  """

  Please generate dimension configurations in YAML format with this structure:

  dimensions:
    - type: <question_type>
      key: key_in_english
      question: "Question text in {language}"
      column_name: "Column name in {language}"
      # Type-specific fields below

  Available question types:
  1. text: Open-ended text extraction (e.g., "What are the main findings?")
  2. yes_no: Binary judgment (e.g., "Is this empirical research?")
  3. single_choice: Choose one from options (e.g., "Research paradigm: quantitative/qualitative/mixed")
  4. multiple_choice: Choose multiple from options (e.g., "Data collection methods used")
  5. number: Numerical extraction (e.g., "Sample size")
  6. rating: Subjective rating 1-N (e.g., "Research quality: 1-5")
  7. list: Extract list of items (e.g., "Key variables")

  Type-specific fields:
  - single_choice/multiple_choice: must have "options" (list of strings)
  - number: optional "unit" (e.g., "ä¸ª", "%")
  - rating: must have "scale" (int), optional "scale_description"
  - list: must have "separator" (e.g., "; ")

  Guidelines:
  1. Choose the most appropriate question type for each piece of information
  2. For choice types, provide comprehensive but focused option lists
  3. Make questions clear and answerable from abstracts/full texts
  4. Generate keys in English snake_case
  5. Generate questions and column names in {language}
  6. Limit to 5-12 dimensions for usability
  7. Group related dimensions together

  Output ONLY the YAML, no explanations.

examples:
  - user_description: |
      "æˆ‘éœ€è¦æå–æ¯ç¯‡æ–‡çŒ®çš„ç ”ç©¶æ–¹æ³•ï¼ˆå®šé‡/å®šæ€§/æ··åˆï¼‰ï¼Œæ ·æœ¬é‡ï¼Œ
      æ˜¯å¦åœ¨ä¸­å›½å¼€å±•,ä½¿ç”¨çš„ä¸»è¦ç†è®ºï¼ˆå¯èƒ½æœ‰å¤šä¸ªï¼‰ï¼Œä»¥åŠæˆ‘å¯¹
      ç ”ç©¶è´¨é‡çš„è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ã€‚"

    output: |
      dimensions:
        - type: single_choice
          key: research_paradigm
          question: "ç ”ç©¶é‡‡ç”¨çš„ç ”ç©¶èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ"
          column_name: "ç ”ç©¶èŒƒå¼"
          options:
            - "å®šé‡ç ”ç©¶"
            - "å®šæ€§ç ”ç©¶"
            - "æ··åˆæ–¹æ³•"
            - "å…¶ä»–"

        - type: number
          key: sample_size
          question: "ç ”ç©¶çš„æ ·æœ¬é‡æ˜¯å¤šå°‘ï¼Ÿå¦‚æ— æ³•ç¡®å®šï¼Œå›ç­”N/Aã€‚"
          column_name: "æ ·æœ¬é‡"
          unit: "ä¸ª"

        - type: yes_no
          key: chinese_context
          question: "æ˜¯å¦åœ¨ä¸­å›½æƒ…å¢ƒä¸‹å¼€å±•ç ”ç©¶ï¼Ÿ"
          column_name: "ä¸­å›½æƒ…å¢ƒ"

        - type: list
          key: theoretical_frameworks
          question: "ç ”ç©¶ä½¿ç”¨äº†å“ªäº›ä¸»è¦ç†è®ºæ¡†æ¶ï¼Ÿè¯·åˆ—å‡ºã€‚"
          column_name: "ç†è®ºæ¡†æ¶"
          separator: "; "

        - type: rating
          key: research_quality
          question: "è¯·è¯„ä¼°æœ¬ç ”ç©¶çš„æ•´ä½“è´¨é‡"
          column_name: "ç ”ç©¶è´¨é‡"
          scale: 5
          scale_description: "1=å¾ˆå·®, 2=è¾ƒå·®, 3=ä¸€èˆ¬, 4=è‰¯å¥½, 5=ä¼˜ç§€"
```

### 3.5 é…ç½®éªŒè¯è§„åˆ™

#### 3.5.1 æ‘˜è¦æ¨¡å¼é…ç½®éªŒè¯

```python
def validate_abstract_mode_config(config: dict) -> None:
    """Validate abstract screening mode configuration.

    Raises:
        ValueError: If configuration is invalid
    """
    # å¿…éœ€å­—æ®µ
    required_fields = ["mode_key", "description", "yes_no_questions", "open_questions"]
    for field in required_fields:
        if field not in config:
            raise ValueError(f"Missing required field: {field}")

    # mode_key æ ¼å¼éªŒè¯
    mode_key = config["mode_key"]
    if not mode_key.replace("_", "").isalnum():
        raise ValueError(f"Invalid mode_key format: {mode_key}")

    # éªŒè¯é—®é¢˜åˆ—è¡¨
    for question_list, list_name in [
        (config["yes_no_questions"], "yes_no_questions"),
        (config["open_questions"], "open_questions")
    ]:
        if not isinstance(question_list, list):
            raise ValueError(f"{list_name} must be a list")

        for idx, q in enumerate(question_list):
            # æ¯ä¸ªé—®é¢˜çš„å¿…éœ€å­—æ®µ
            q_required = ["key", "question", "column_name"]
            for field in q_required:
                if field not in q:
                    raise ValueError(
                        f"{list_name}[{idx}] missing field: {field}"
                    )

            # key æ ¼å¼éªŒè¯
            if not q["key"].replace("_", "").isalnum():
                raise ValueError(
                    f"Invalid question key format: {q['key']}"
                )

    # æ£€æŸ¥é—®é¢˜æ•°é‡åˆç†æ€§
    total_questions = len(config["yes_no_questions"]) + len(config["open_questions"])
    if total_questions == 0:
        raise ValueError("Configuration must have at least one question")
    if total_questions > 15:
        warnings.warn(f"Too many questions ({total_questions}), consider reducing")
```

#### 3.5.2 çŸ©é˜µç»´åº¦é…ç½®éªŒè¯

```python
def validate_matrix_dimension(dimension: dict) -> None:
    """Validate a single matrix dimension configuration.

    Raises:
        ValueError: If dimension is invalid
    """
    # å¿…éœ€å­—æ®µ
    required_fields = ["type", "key", "question", "column_name"]
    for field in required_fields:
        if field not in dimension:
            raise ValueError(f"Missing required field: {field}")

    # ç±»å‹éªŒè¯
    valid_types = ["text", "yes_no", "single_choice", "multiple_choice",
                   "number", "rating", "list"]
    if dimension["type"] not in valid_types:
        raise ValueError(f"Invalid type: {dimension['type']}")

    # key æ ¼å¼éªŒè¯
    key = dimension["key"]
    if not key.replace("_", "").isalnum() or key[0].isdigit():
        raise ValueError(f"Invalid key format: {key}")

    # ç±»å‹ç‰¹å®šéªŒè¯
    dim_type = dimension["type"]

    if dim_type in ["single_choice", "multiple_choice"]:
        if "options" not in dimension:
            raise ValueError(f"{dim_type} requires 'options' field")
        if not isinstance(dimension["options"], list):
            raise ValueError("'options' must be a list")
        if len(dimension["options"]) < 2:
            raise ValueError("Choice type must have at least 2 options")

    if dim_type == "rating":
        if "scale" not in dimension:
            raise ValueError("Rating type requires 'scale' field")
        scale = dimension["scale"]
        if not isinstance(scale, int) or scale < 2 or scale > 10:
            raise ValueError(f"Invalid scale value: {scale} (must be 2-10)")

    if dim_type == "list":
        if "separator" not in dimension:
            raise ValueError("List type requires 'separator' field")
```

---

## 4. å®ç°è®¡åˆ’

### 4.1 å¼€å‘é˜¶æ®µ

#### é˜¶æ®µ 1ï¼šæ ¸å¿ƒé€»è¾‘å®ç°ï¼ˆ3-4å¤©ï¼‰
**ä»»åŠ¡**ï¼š
1. åˆ›å»º `litrx/ai_config_generator.py`
   - å®ç° `AbstractModeGenerator` ç±»
   - å®ç° `MatrixDimensionGenerator` ç±»
   - æ·»åŠ é…ç½®éªŒè¯å‡½æ•°

2. åˆ›å»ºæç¤ºè¯æ¨¡æ¿æ–‡ä»¶
   - `litrx/prompts/abstract_mode_generation.yaml`
   - `litrx/prompts/matrix_dimension_generation.yaml`

3. å•å…ƒæµ‹è¯•
   - æµ‹è¯• AI å“åº”è§£æ
   - æµ‹è¯•é…ç½®éªŒè¯
   - Mock AI å®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•

**äº¤ä»˜ç‰©**ï¼š
- å¯å·¥ä½œçš„ç”Ÿæˆå™¨ç±»
- æç¤ºè¯æ¨¡æ¿
- å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ > 80%ï¼‰

#### é˜¶æ®µ 2ï¼šGUI å¯¹è¯æ¡†å®ç°ï¼ˆ2-3å¤©ï¼‰
**ä»»åŠ¡**ï¼š
1. åˆ›å»º `litrx/gui/dialogs/ai_mode_assistant.py`
   - å®ç° `AIModeAssistantDialog` ç±»
   - è®¾è®¡ç”¨æˆ·ç•Œé¢
   - é›†æˆ `AbstractModeGenerator`

2. åˆ›å»º `litrx/gui/dialogs/ai_dimension_assistant.py`
   - å®ç° `AIDimensionAssistantDialog` ç±»
   - è®¾è®¡ç”¨æˆ·ç•Œé¢ï¼ˆå¸¦è¡¨æ ¼é¢„è§ˆå’Œå¤é€‰æ¡†ï¼‰
   - é›†æˆ `MatrixDimensionGenerator`

3. æ·»åŠ å›½é™…åŒ–æ”¯æŒ
   - åœ¨ `litrx/i18n.py` ä¸­æ·»åŠ æ–°çš„ç¿»è¯‘æ¡ç›®
   - æ”¯æŒä¸­è‹±æ–‡

**äº¤ä»˜ç‰©**ï¼š
- åŠŸèƒ½å®Œæ•´çš„å¯¹è¯æ¡†ç»„ä»¶
- å›½é™…åŒ–ç¿»è¯‘

#### é˜¶æ®µ 3ï¼šé›†æˆåˆ°ç°æœ‰æ ‡ç­¾é¡µï¼ˆ1-2å¤©ï¼‰
**ä»»åŠ¡**ï¼š
1. ä¿®æ”¹ `litrx/gui/tabs/abstract/abstract_tab.py`
   - æ·»åŠ "AI è¾…åŠ©åˆ›å»º"æŒ‰é’®
   - é›†æˆ `AIModeAssistantDialog`
   - å¤„ç†ç”Ÿæˆç»“æœï¼ˆä¿å­˜åˆ° questions_config.jsonï¼‰

2. ä¿®æ”¹ `litrx/gui/dialogs/dimension_editor.py`
   - æ·»åŠ "AI è¾…åŠ©åˆ›å»º"æŒ‰é’®
   - é›†æˆ `AIDimensionAssistantDialog`
   - å¤„ç†ç”Ÿæˆç»“æœï¼ˆæ·»åŠ åˆ°ç»´åº¦åˆ—è¡¨ï¼‰

**äº¤ä»˜ç‰©**ï¼š
- é›†æˆå®Œæˆçš„ GUI
- é…ç½®æ–‡ä»¶è¯»å†™é€»è¾‘

#### é˜¶æ®µ 4ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ2-3å¤©ï¼‰
**ä»»åŠ¡**ï¼š
1. ç«¯åˆ°ç«¯æµ‹è¯•
   - æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹
   - æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µ

2. æç¤ºè¯ä¼˜åŒ–
   - æ ¹æ®å®é™…ç”Ÿæˆæ•ˆæœè°ƒæ•´æç¤ºè¯
   - ç¡®ä¿ç”Ÿæˆè´¨é‡ç¨³å®š

3. é”™è¯¯å¤„ç†
   - ä¼˜åŒ–é”™è¯¯æç¤º
   - æ·»åŠ é‡è¯•æœºåˆ¶

4. æ€§èƒ½ä¼˜åŒ–
   - ä¼˜åŒ– AI è°ƒç”¨ï¼ˆé¿å…è¶…æ—¶ï¼‰
   - æ·»åŠ åŠ è½½çŠ¶æ€æŒ‡ç¤º

**äº¤ä»˜ç‰©**ï¼š
- ç¨³å®šå¯ç”¨çš„åŠŸèƒ½
- ä¼˜åŒ–çš„æç¤ºè¯æ¨¡æ¿
- é”™è¯¯å¤„ç†æœºåˆ¶

#### é˜¶æ®µ 5ï¼šæ–‡æ¡£ä¸å‘å¸ƒï¼ˆ1å¤©ï¼‰
**ä»»åŠ¡**ï¼š
1. æ›´æ–°æ–‡æ¡£
   - æ›´æ–° `README.md` å’Œ `Chinese_README.md`
   - æ›´æ–° `CLAUDE.md`
   - åˆ›å»ºç”¨æˆ·æŒ‡å—ï¼ˆå¦‚ä½•ä½¿ç”¨ AI åŠ©æ‰‹ï¼‰

2. åˆ›å»ºç¤ºä¾‹
   - æä¾›å…¸å‹ç”¨ä¾‹ç¤ºä¾‹
   - å½•åˆ¶æ¼”ç¤ºè§†é¢‘ï¼ˆå¯é€‰ï¼‰

**äº¤ä»˜ç‰©**ï¼š
- å®Œæ•´æ–‡æ¡£
- ç”¨æˆ·æŒ‡å—

### 4.2 å¼€å‘ä¼˜å…ˆçº§

**å¿…éœ€åŠŸèƒ½ï¼ˆMVPï¼‰**ï¼š
1. âœ… æ ¸å¿ƒç”Ÿæˆå™¨ç±»
2. âœ… æç¤ºè¯æ¨¡æ¿
3. âœ… åŸºç¡€ GUI å¯¹è¯æ¡†
4. âœ… é›†æˆåˆ°ç°æœ‰æ ‡ç­¾é¡µ

**å¢å¼ºåŠŸèƒ½ï¼ˆv1.1ï¼‰**ï¼š
1. å†å²è®°å½•åŠŸèƒ½ï¼ˆä¿å­˜ç”¨æˆ·ä¹‹å‰çš„æè¿°å’Œç”Ÿæˆç»“æœï¼‰
2. é…ç½®æ¨¡æ¿åº“ï¼ˆé¢„è®¾å¸¸è§é¢†åŸŸçš„é…ç½®ï¼‰
3. æ‰¹é‡ç”Ÿæˆï¼ˆä¸€æ¬¡æè¿°ç”Ÿæˆå¤šä¸ªç›¸å…³é…ç½®ï¼‰
4. æ™ºèƒ½å»ºè®®ï¼ˆåŸºäºå·²æœ‰é…ç½®æ¨èç›¸å…³é—®é¢˜ï¼‰

**æœªæ¥åŠŸèƒ½ï¼ˆv2.0ï¼‰**ï¼š
1. å¯¹è¯å¼é…ç½®ï¼ˆå¤šè½®å¯¹è¯ç²¾ç»†åŒ–é…ç½®ï¼‰
2. é…ç½®åˆ†æï¼ˆåˆ†æç°æœ‰é…ç½®å¹¶æä¾›ä¼˜åŒ–å»ºè®®ï¼‰
3. è·¨æ¨¡å¼å­¦ä¹ ï¼ˆåŸºäºå†å²ä½¿ç”¨å­¦ä¹ ç”¨æˆ·åå¥½ï¼‰

### 4.3 æŠ€æœ¯é£é™©ä¸åº”å¯¹

#### é£é™© 1ï¼šAI ç”Ÿæˆè´¨é‡ä¸ç¨³å®š
**å½±å“**ï¼šç”Ÿæˆçš„é…ç½®å¯èƒ½ä¸ç¬¦åˆç”¨æˆ·éœ€æ±‚

**åº”å¯¹**ï¼š
- ä½¿ç”¨è¾ƒä½çš„ temperature (0.3) æé«˜ç¨³å®šæ€§
- æä¾›è¯¦ç»†çš„æç¤ºè¯ç¤ºä¾‹
- å…è®¸ç”¨æˆ·é‡æ–°ç”Ÿæˆ
- æä¾›æ‰‹åŠ¨ç¼–è¾‘åŠŸèƒ½ä½œä¸ºè¡¥å……

#### é£é™© 2ï¼šAI API è°ƒç”¨å¤±è´¥
**å½±å“**ï¼šåŠŸèƒ½ä¸å¯ç”¨

**åº”å¯¹**ï¼š
- æ·»åŠ é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š3æ¬¡ï¼‰
- æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º
- é™çº§æ–¹æ¡ˆï¼šå›é€€åˆ°æ‰‹åŠ¨ç¼–è¾‘æ¨¡å¼
- æ·»åŠ ç½‘ç»œè¶…æ—¶å¤„ç†

#### é£é™© 3ï¼šç”Ÿæˆçš„é…ç½®æ ¼å¼ä¸æ­£ç¡®
**å½±å“**ï¼šæ— æ³•ä¿å­˜æˆ–ä½¿ç”¨é…ç½®

**åº”å¯¹**ï¼š
- ä¸¥æ ¼çš„é…ç½®éªŒè¯
- æä¾›æ ¼å¼ä¿®å¤å»ºè®®
- å…è®¸ç”¨æˆ·æ‰‹åŠ¨ä¿®æ­£
- è®°å½•å¤±è´¥æ¡ˆä¾‹ç”¨äºæ”¹è¿›æç¤ºè¯

#### é£é™© 4ï¼šç”¨æˆ·æè¿°ä¸æ¸…æ™°
**å½±å“**ï¼šAI æ— æ³•ç†è§£éœ€æ±‚

**åº”å¯¹**ï¼š
- æä¾›è¯¦ç»†çš„å¼•å¯¼æ–‡æœ¬å’Œç¤ºä¾‹
- å…è®¸ç”¨æˆ·è¿­ä»£ï¼ˆé‡æ–°æè¿°ï¼‰
- æä¾›å¯¹è¯å¼æ¾„æ¸…ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

### 4.4 æ€§èƒ½æŒ‡æ ‡

#### å“åº”æ—¶é—´
- AI è°ƒç”¨å“åº”æ—¶é—´ï¼š< 10ç§’ï¼ˆå–å†³äº AI æœåŠ¡ï¼‰
- é…ç½®è§£æå’ŒéªŒè¯ï¼š< 1ç§’
- æ€»ä½“ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼š< 15ç§’

#### è´¨é‡æŒ‡æ ‡
- é…ç½®éªŒè¯é€šè¿‡ç‡ï¼š> 95%
- ç”¨æˆ·æ»¡æ„åº¦ï¼ˆéœ€è¦çš„é—®é¢˜è¦†ç›–ç‡ï¼‰ï¼š> 80%
- ä¸€æ¬¡ç”ŸæˆæˆåŠŸç‡ï¼ˆæ— éœ€é‡æ–°ç”Ÿæˆï¼‰ï¼š> 70%

---

## 5. ç”¨æˆ·ä½“éªŒè®¾è®¡

### 5.1 ç•Œé¢è®¾è®¡è‰å›¾

#### 5.1.1 æ‘˜è¦æ¨¡å¼ AI åŠ©æ‰‹å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI è¾…åŠ©åˆ›å»ºç­›é€‰æ¨¡å¼                          âœ•      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ğŸ“ è¯·æè¿°æ‚¨çš„æ–‡çŒ®ç­›é€‰éœ€æ±‚ï¼š                        â”‚
â”‚                                                     â”‚
â”‚  æ‚¨å¯ä»¥åŒ…æ‹¬ï¼š                                       â”‚
â”‚  â€¢ ç ”ç©¶é¢†åŸŸæˆ–ä¸»é¢˜                                   â”‚
â”‚  â€¢ éœ€è¦åˆ¤æ–­çš„ç‰¹å¾ï¼ˆæ˜¯éé—®é¢˜ï¼‰                       â”‚
â”‚  â€¢ éœ€è¦æå–çš„ä¿¡æ¯ï¼ˆå¼€æ”¾é—®é¢˜ï¼‰                       â”‚
â”‚                                                     â”‚
â”‚  ç¤ºä¾‹ï¼š"æˆ‘æƒ³ç­›é€‰å…³äºæ¶ˆè´¹è€…è¡Œä¸ºçš„å®è¯ç ”ç©¶..."       â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚  [ç”¨æˆ·è¾“å…¥åŒºåŸŸ - å¤šè¡Œæ–‡æœ¬æ¡†]                 â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚                      [ç”Ÿæˆé…ç½®]                     â”‚
â”‚                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                     â”‚
â”‚  ğŸ“‹ ç”Ÿæˆçš„é…ç½®é¢„è§ˆï¼š                                â”‚
â”‚                                                     â”‚
â”‚  æ¨¡å¼åç§°ï¼šconsumer_behavior_screening              â”‚
â”‚  æè¿°ï¼šæ¶ˆè´¹è€…è¡Œä¸ºç ”ç©¶ç­›é€‰                           â”‚
â”‚                                                     â”‚
â”‚  æ˜¯éåˆ¤æ–­é—®é¢˜ (3)ï¼š                                 â”‚
â”‚    âœ“ æ˜¯å¦ä¸ºå®è¯ç ”ç©¶ï¼Ÿ                               â”‚
â”‚    âœ“ æ˜¯å¦ä½¿ç”¨é—®å·è°ƒæŸ¥æ³•ï¼Ÿ                           â”‚
â”‚    âœ“ æ˜¯å¦åœ¨ä¸­å›½æƒ…å¢ƒä¸‹å¼€å±•ï¼Ÿ                         â”‚
â”‚                                                     â”‚
â”‚  å¼€æ”¾é—®é¢˜ (2)ï¼š                                     â”‚
â”‚    â€¢ ä¸»è¦ç ”ç©¶å‘ç°æ˜¯ä»€ä¹ˆï¼Ÿ                           â”‚
â”‚    â€¢ ä½¿ç”¨äº†ä»€ä¹ˆç†è®ºæ¡†æ¶ï¼Ÿ                           â”‚
â”‚                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                     â”‚
â”‚             [é‡æ–°ç”Ÿæˆ]  [åº”ç”¨]  [å–æ¶ˆ]              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.1.2 çŸ©é˜µç»´åº¦ AI åŠ©æ‰‹å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI è¾…åŠ©åˆ›å»ºåˆ†æç»´åº¦                                      âœ•      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ è¯·æè¿°æ‚¨éœ€è¦ä»æ–‡çŒ®ä¸­æå–çš„ä¿¡æ¯ï¼š                            â”‚
â”‚                                                                 â”‚
â”‚  æ‚¨å¯ä»¥åŒ…æ‹¬ï¼š                                                   â”‚
â”‚  â€¢ ç ”ç©¶ç‰¹å¾ï¼ˆç ”ç©¶ç±»å‹ã€æ–¹æ³•ç­‰ï¼‰                                 â”‚
â”‚  â€¢ æ•°å€¼ä¿¡æ¯ï¼ˆæ ·æœ¬é‡ã€æ•ˆåº”é‡ç­‰ï¼‰                                 â”‚
â”‚  â€¢ åˆ†ç±»ä¿¡æ¯ï¼ˆé¢†åŸŸã€ç†è®ºç­‰ï¼‰                                     â”‚
â”‚  â€¢ è¯„ä¼°éœ€æ±‚ï¼ˆè´¨é‡è¯„åˆ†ã€ç›¸å…³æ€§ç­‰ï¼‰                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  [ç”¨æˆ·è¾“å…¥åŒºåŸŸ - å¤šè¡Œæ–‡æœ¬æ¡†]                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚                          [ç”Ÿæˆç»´åº¦]                             â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“‹ ç”Ÿæˆçš„ç»´åº¦é…ç½®ï¼ˆè¯·é€‰æ‹©éœ€è¦çš„ç»´åº¦ï¼‰ï¼š                        â”‚
â”‚                                                                 â”‚
â”‚  [âœ“] å…¨é€‰                                                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜‘ â”‚ ç±»å‹       â”‚ é—®é¢˜                 â”‚ åˆ—å     â”‚ è¯¦æƒ…   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â˜‘ â”‚ å•é€‰é¢˜     â”‚ ç ”ç©¶èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ     â”‚ ç ”ç©¶èŒƒå¼ â”‚ 3é€‰é¡¹  â”‚ â”‚
â”‚  â”‚ â˜‘ â”‚ æ•°å€¼æå–   â”‚ æ ·æœ¬é‡æ˜¯å¤šå°‘ï¼Ÿ       â”‚ æ ·æœ¬é‡   â”‚ å•ä½:ä¸ªâ”‚ â”‚
â”‚  â”‚ â˜‘ â”‚ æ˜¯/å¦     â”‚ æ˜¯å¦åœ¨ä¸­å›½å¼€å±•ï¼Ÿ     â”‚ ä¸­å›½æƒ…å¢ƒ â”‚ -      â”‚ â”‚
â”‚  â”‚ â˜‘ â”‚ åˆ—è¡¨æå–   â”‚ ä½¿ç”¨çš„ä¸»è¦ç†è®ºï¼Ÿ     â”‚ ç†è®ºæ¡†æ¶ â”‚ åˆ†éš”;  â”‚ â”‚
â”‚  â”‚ â˜‘ â”‚ è¯„åˆ†       â”‚ è¯„ä¼°ç ”ç©¶è´¨é‡         â”‚ ç ”ç©¶è´¨é‡ â”‚ 1-5åˆ†  â”‚ â”‚
â”‚  â”‚ â˜ â”‚ å¤šé€‰é¢˜     â”‚ æ•°æ®æ”¶é›†æ–¹æ³•ï¼Ÿ       â”‚ æ”¶é›†æ–¹æ³• â”‚ 5é€‰é¡¹  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  å·²é€‰æ‹© 5/6 ä¸ªç»´åº¦                                              â”‚
â”‚                                                                 â”‚
â”‚             [é‡æ–°ç”Ÿæˆ]  [åº”ç”¨é€‰ä¸­]  [å–æ¶ˆ]                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 äº¤äº’æµç¨‹ä¼˜åŒ–

#### ä¼˜åŒ– 1ï¼šæ¸è¿›å¼æŠ«éœ²
- åˆå§‹ç•Œé¢åªæ˜¾ç¤ºè¾“å…¥æ¡†å’Œå¼•å¯¼æ–‡æœ¬
- ç”Ÿæˆåæ‰æ˜¾ç¤ºé¢„è§ˆåŒºåŸŸ
- å‡å°‘åˆå§‹è®¤çŸ¥è´Ÿè·

#### ä¼˜åŒ– 2ï¼šå³æ—¶åé¦ˆ
- ç”Ÿæˆè¿‡ç¨‹ä¸­æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- æ˜¾ç¤º"AI æ­£åœ¨åˆ†ææ‚¨çš„éœ€æ±‚..."ç­‰æç¤º
- ç”Ÿæˆå®Œæˆåé«˜äº®é¢„è§ˆåŒºåŸŸ

#### ä¼˜åŒ– 3ï¼šé”™è¯¯å¤„ç†å‹å¥½
- AI è°ƒç”¨å¤±è´¥æ—¶æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º
- æä¾›é‡è¯•æŒ‰é’®
- å»ºè®®é™çº§åˆ°æ‰‹åŠ¨ç¼–è¾‘æ¨¡å¼

#### ä¼˜åŒ– 4ï¼šçµæ´»æ€§
- å…è®¸ç”¨æˆ·ä¿®æ”¹ç”Ÿæˆçš„é…ç½®
- æä¾›"åŸºäºæ­¤é‡æ–°ç”Ÿæˆ"åŠŸèƒ½
- æ”¯æŒéƒ¨åˆ†åº”ç”¨ï¼ˆçŸ©é˜µç»´åº¦ï¼‰

---

## 6. æµ‹è¯•è®¡åˆ’

### 6.1 å•å…ƒæµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 1ï¼šAbstractModeGenerator
```python
def test_generate_mode_basic():
    """æµ‹è¯•åŸºæœ¬çš„æ¨¡å¼ç”ŸæˆåŠŸèƒ½"""
    generator = AbstractModeGenerator(config)

    description = "æˆ‘éœ€è¦ç­›é€‰å®è¯ç ”ç©¶ï¼Œåˆ¤æ–­æ˜¯å¦ä½¿ç”¨é—®å·æ³•"
    result = generator.generate_mode(description, language="zh")

    assert "mode_key" in result
    assert "yes_no_questions" in result
    assert len(result["yes_no_questions"]) > 0


def test_generate_mode_validation():
    """æµ‹è¯•ç”Ÿæˆé…ç½®çš„éªŒè¯"""
    generator = AbstractModeGenerator(config)

    # Mock invalid AI response
    with pytest.raises(ValueError):
        generator._validate_config({"invalid": "config"})


def test_parse_response_json():
    """æµ‹è¯• JSON å“åº”è§£æ"""
    generator = AbstractModeGenerator(config)

    json_str = '{"mode_key": "test", ...}'
    result = generator._parse_response(json_str)

    assert isinstance(result, dict)
    assert result["mode_key"] == "test"
```

#### æµ‹è¯•ç”¨ä¾‹ 2ï¼šMatrixDimensionGenerator
```python
def test_generate_dimensions_basic():
    """æµ‹è¯•åŸºæœ¬çš„ç»´åº¦ç”ŸæˆåŠŸèƒ½"""
    generator = MatrixDimensionGenerator(config)

    description = "æå–ç ”ç©¶æ–¹æ³•å’Œæ ·æœ¬é‡"
    result = generator.generate_dimensions(description, language="zh")

    assert isinstance(result, list)
    assert len(result) > 0
    assert all("type" in dim for dim in result)


def test_validate_dimension_types():
    """æµ‹è¯•å„ç§ç»´åº¦ç±»å‹çš„éªŒè¯"""
    generator = MatrixDimensionGenerator(config)

    # Valid single_choice
    dim = {
        "type": "single_choice",
        "key": "test",
        "question": "Test?",
        "column_name": "Test",
        "options": ["A", "B"]
    }
    generator._validate_dimension(dim)  # Should not raise

    # Invalid: missing options
    dim_invalid = {
        "type": "single_choice",
        "key": "test",
        "question": "Test?",
        "column_name": "Test"
    }
    with pytest.raises(ValueError):
        generator._validate_dimension(dim_invalid)
```

### 6.2 é›†æˆæµ‹è¯•

#### æµ‹è¯•åœºæ™¯ 1ï¼šç«¯åˆ°ç«¯æ¨¡å¼åˆ›å»º
```python
def test_end_to_end_mode_creation(mock_ai_client):
    """æµ‹è¯•å®Œæ•´çš„æ¨¡å¼åˆ›å»ºæµç¨‹"""
    # 1. ç”¨æˆ·è¾“å…¥æè¿°
    description = "ç­›é€‰å¿ƒç†å­¦å®è¯ç ”ç©¶"

    # 2. è°ƒç”¨ç”Ÿæˆå™¨
    generator = AbstractModeGenerator(config_with_mock_client)
    result = generator.generate_mode(description)

    # 3. éªŒè¯ç»“æœ
    assert result is not None
    validate_abstract_mode_config(result)

    # 4. ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
    save_to_questions_config(result)

    # 5. éªŒè¯å¯ä»¥åŠ è½½
    loaded = load_mode_questions(result["mode_key"])
    assert loaded == result
```

#### æµ‹è¯•åœºæ™¯ 2ï¼šç«¯åˆ°ç«¯ç»´åº¦åˆ›å»º
```python
def test_end_to_end_dimension_creation(mock_ai_client):
    """æµ‹è¯•å®Œæ•´çš„ç»´åº¦åˆ›å»ºæµç¨‹"""
    # 1. ç”¨æˆ·è¾“å…¥æè¿°
    description = "æå–ç ”ç©¶æ–¹æ³•ã€æ ·æœ¬é‡ã€ç ”ç©¶è´¨é‡è¯„åˆ†"

    # 2. è°ƒç”¨ç”Ÿæˆå™¨
    generator = MatrixDimensionGenerator(config_with_mock_client)
    dimensions = generator.generate_dimensions(description)

    # 3. éªŒè¯ç»“æœ
    assert len(dimensions) >= 3
    for dim in dimensions:
        validate_matrix_dimension(dim)

    # 4. æ·»åŠ åˆ°é…ç½®
    config = load_matrix_config()
    config["dimensions"].extend(dimensions)
    save_matrix_config(config)
```

### 6.3 ç”¨æˆ·éªŒæ”¶æµ‹è¯•

#### æµ‹è¯•åœºæ™¯ 1ï¼šæ–°æ‰‹ç”¨æˆ·åˆ›å»ºæ¨¡å¼
**ç›®æ ‡**ï¼šéªŒè¯éæŠ€æœ¯ç”¨æˆ·èƒ½å¦æˆåŠŸä½¿ç”¨

**æ­¥éª¤**ï¼š
1. æ‰“å¼€æ‘˜è¦ç­›é€‰æ ‡ç­¾é¡µ
2. ç‚¹å‡»"AI è¾…åŠ©åˆ›å»ºæ¨¡å¼"
3. æ ¹æ®å¼•å¯¼è¾“å…¥éœ€æ±‚æè¿°
4. ç‚¹å‡»"ç”Ÿæˆé…ç½®"
5. æŸ¥çœ‹é¢„è§ˆ
6. ç‚¹å‡»"åº”ç”¨"
7. éªŒè¯æ¨¡å¼å‡ºç°åœ¨ä¸‹æ‹‰åˆ—è¡¨

**æˆåŠŸæ ‡å‡†**ï¼š
- ç”¨æˆ·èƒ½åœ¨ 5 åˆ†é’Ÿå†…å®Œæˆæ“ä½œ
- ç”Ÿæˆçš„é…ç½®ç¬¦åˆç”¨æˆ·éœ€æ±‚
- æ— éœ€æŠ€æœ¯çŸ¥è¯†

#### æµ‹è¯•åœºæ™¯ 2ï¼šé«˜çº§ç”¨æˆ·åˆ›å»ºå¤æ‚ç»´åº¦
**ç›®æ ‡**ï¼šéªŒè¯åŠŸèƒ½èƒ½å¦å¤„ç†å¤æ‚éœ€æ±‚

**æ­¥éª¤**ï¼š
1. æ‰“å¼€æ–‡çŒ®çŸ©é˜µæ ‡ç­¾é¡µ
2. ç‚¹å‡»"ç¼–è¾‘ç»´åº¦" â†’ "AI è¾…åŠ©åˆ›å»º"
3. è¾“å…¥åŒ…å«å¤šç§ä¿¡æ¯ç±»å‹çš„å¤æ‚æè¿°
4. ç”Ÿæˆå¹¶é¢„è§ˆ
5. é€‰æ‹©éƒ¨åˆ†ç»´åº¦åº”ç”¨
6. æ‰‹åŠ¨ç¼–è¾‘æŸäº›ç»´åº¦
7. ä¿å­˜é…ç½®

**æˆåŠŸæ ‡å‡†**ï¼š
- AI èƒ½æ­£ç¡®è¯†åˆ«å¤šç§ä¿¡æ¯ç±»å‹
- ç”Ÿæˆçš„ç»´åº¦ç±»å‹å‡†ç¡®
- ç”¨æˆ·èƒ½çµæ´»é€‰æ‹©å’Œç¼–è¾‘

---

## 7. åç»­ä¼˜åŒ–æ–¹å‘

### 7.1 çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2ä¸ªæœˆï¼‰

1. **é…ç½®æ¨¡æ¿åº“**
   - é¢„è®¾å¸¸è§é¢†åŸŸçš„é…ç½®ï¼ˆå¿ƒç†å­¦ã€æ•™è‚²å­¦ã€åŒ»å­¦ç­‰ï¼‰
   - ç”¨æˆ·å¯ä»¥åŸºäºæ¨¡æ¿ä¿®æ”¹

2. **å†å²è®°å½•**
   - ä¿å­˜ç”¨æˆ·ä¹‹å‰çš„æè¿°å’Œç”Ÿæˆç»“æœ
   - æ”¯æŒé‡æ–°ä½¿ç”¨æˆ–ä¿®æ”¹

3. **æ™ºèƒ½æ¨è**
   - åŸºäºå½“å‰é…ç½®æ¨èç›¸å…³é—®é¢˜
   - æ£€æµ‹é—æ¼çš„å¸¸è§ç»´åº¦

### 7.2 ä¸­æœŸä¼˜åŒ–ï¼ˆ3-6ä¸ªæœˆï¼‰

1. **å¯¹è¯å¼é…ç½®**
   - å¤šè½®å¯¹è¯ç²¾ç»†åŒ–éœ€æ±‚
   - AI ä¸»åŠ¨è¯¢é—®æ¾„æ¸…é—®é¢˜

2. **é…ç½®åˆ†æ**
   - åˆ†æç°æœ‰é…ç½®çš„åˆç†æ€§
   - æä¾›ä¼˜åŒ–å»ºè®®

3. **æ‰¹é‡ç”Ÿæˆ**
   - ä¸€æ¬¡æè¿°ç”Ÿæˆå¤šä¸ªç›¸å…³é…ç½®
   - æ”¯æŒé…ç½®å˜ä½“

### 7.3 é•¿æœŸä¼˜åŒ–ï¼ˆ6-12ä¸ªæœˆï¼‰

1. **è·¨æ¨¡å¼å­¦ä¹ **
   - åŸºäºå†å²ä½¿ç”¨å­¦ä¹ ç”¨æˆ·åå¥½
   - ä¸ªæ€§åŒ–æ¨è

2. **åä½œå…±äº«**
   - ç”¨æˆ·å¯ä»¥åˆ†äº«é…ç½®æ¨¡æ¿
   - ç¤¾åŒºé…ç½®åº“

3. **è‡ªåŠ¨ä¼˜åŒ–**
   - åŸºäºä½¿ç”¨åé¦ˆè‡ªåŠ¨ä¼˜åŒ–æç¤ºè¯
   - A/B æµ‹è¯•ä¸åŒç”Ÿæˆç­–ç•¥

---

## 8. æˆåŠŸæŒ‡æ ‡

### 8.1 åŠŸèƒ½æŒ‡æ ‡

- âœ… é…ç½®ç”ŸæˆæˆåŠŸç‡ > 95%
- âœ… é…ç½®éªŒè¯é€šè¿‡ç‡ > 95%
- âœ… AI å“åº”æ—¶é—´ < 15ç§’
- âœ… ç”¨æˆ·æ“ä½œæ­¥éª¤ < 5 æ­¥

### 8.2 ç”¨æˆ·æŒ‡æ ‡

- ğŸ¯ æ–°ç”¨æˆ·ä½¿ç”¨ç‡ > 60%
- ğŸ¯ ç”Ÿæˆé…ç½®ç›´æ¥ä½¿ç”¨ç‡ > 50%
- ğŸ¯ ç”¨æˆ·æ»¡æ„åº¦ > 4/5
- ğŸ¯ åŠŸèƒ½æ¨èç‡ > 80%

### 8.3 è´¨é‡æŒ‡æ ‡

- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- âœ… é›†æˆæµ‹è¯•è¦†ç›–ç‡ > 70%
- âœ… å…³é”®è·¯å¾„æµ‹è¯•è¦†ç›–ç‡ 100%
- âœ… Bug ä¿®å¤æ—¶é—´ < 48 å°æ—¶

---

## 9. é™„å½•

### 9.1 æœ¯è¯­è¡¨

- **æ‘˜è¦ç­›é€‰æ¨¡å¼ï¼ˆAbstract Screening Modeï¼‰**ï¼šä¸€ç»„ç”¨äºç­›é€‰æ–‡çŒ®çš„é—®é¢˜é…ç½®
- **æ–‡çŒ®çŸ©é˜µç»´åº¦ï¼ˆLiterature Matrix Dimensionï¼‰**ï¼šæ–‡çŒ®çŸ©é˜µåˆ†æä¸­çš„å•ä¸ªæå–ç»´åº¦
- **Yes/No é—®é¢˜**ï¼šéœ€è¦AIåˆ¤æ–­æ˜¯æˆ–å¦çš„é—®é¢˜
- **å¼€æ”¾é—®é¢˜ï¼ˆOpen Questionï¼‰**ï¼šéœ€è¦AIæå–æè¿°æ€§ä¿¡æ¯çš„é—®é¢˜
- **é—®é¢˜ç±»å‹ï¼ˆQuestion Typeï¼‰**ï¼š7ç§çŸ©é˜µç»´åº¦ç±»å‹ä¹‹ä¸€

### 9.2 ç›¸å…³æ–‡ä»¶æ¸…å•

**ç°æœ‰æ–‡ä»¶**ï¼š
- `litrx/abstract_screener.py` - æ‘˜è¦ç­›é€‰æ ¸å¿ƒé€»è¾‘
- `litrx/matrix_analyzer.py` - çŸ©é˜µåˆ†ææ ¸å¿ƒé€»è¾‘
- `litrx/ai_client.py` - AI å®¢æˆ·ç«¯
- `questions_config.json` - æ‘˜è¦æ¨¡å¼é…ç½®
- `configs/matrix/default.yaml` - çŸ©é˜µç»´åº¦é…ç½®

**æ–°å¢æ–‡ä»¶**ï¼š
- `litrx/ai_config_generator.py` - AI é…ç½®ç”Ÿæˆå™¨
- `litrx/gui/dialogs/ai_mode_assistant.py` - æ¨¡å¼AIåŠ©æ‰‹å¯¹è¯æ¡†
- `litrx/gui/dialogs/ai_dimension_assistant.py` - ç»´åº¦AIåŠ©æ‰‹å¯¹è¯æ¡†
- `litrx/prompts/abstract_mode_generation.yaml` - æ¨¡å¼ç”Ÿæˆæç¤ºè¯
- `litrx/prompts/matrix_dimension_generation.yaml` - ç»´åº¦ç”Ÿæˆæç¤ºè¯

### 9.3 å‚è€ƒèµ„æ–™

- [OpenAI API Documentation](https://platform.openai.com/docs)
- [YAML Specification](https://yaml.org/spec/)
- [Tkinter Documentation](https://docs.python.org/3/library/tkinter.html)
- [LitRelevanceAI ARCHITECTURE.md](../ARCHITECTURE.md)

---

**æ–‡æ¡£ç»´æŠ¤**ï¼š
æœ¬æ–‡æ¡£å°†åœ¨å¼€å‘è¿‡ç¨‹ä¸­æŒç»­æ›´æ–°ã€‚å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·åœ¨ GitHub Issues ä¸­è®¨è®ºã€‚
